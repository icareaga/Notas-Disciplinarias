<app-navigation-buttons></app-navigation-buttons>

<div class="card">
  <h2>4. Evaluar Resultados</h2>

  <div *ngIf="errorMensaje" class="error-banner" style="margin-bottom: 12px;">
    {{ errorMensaje }}
  </div>

  <form [formGroup]="evaluacionForm" (ngSubmit)="onSubmit()">
    <div class="form-group">
      <label>Sesión privada*</label>
      <input type="text" formControlName="sesion" placeholder="Fecha, hora y lugar de la sesión privada">
    </div>

    <div class="form-group">
      <label>Comparación desempeño actual vs objetivos*</label>
      <textarea formControlName="comparacion" rows="3" placeholder="Describir los puntos clave de comparación..."></textarea>
    </div>

    <div class="form-group">
      <label>Avances y áreas de mejora</label>
      <textarea formControlName="avances" rows="3" placeholder="Reconocer avances o señalar áreas a mejorar..."></textarea>
    </div>

    <div class="form-group">
      <label>Nuevos compromisos</label>
      <textarea formControlName="compromisos" rows="3" placeholder="Definir compromisos nuevos si son necesarios..."></textarea>
    </div>

    <button type="submit" class="btn-guardar" [disabled]="isLoading">
      {{ modoEdicion ? 'Actualizar' : 'Guardar' }}
    </button>
  </form>

  <!-- Botones de flujo -->
  <div class="acciones">
    <button class="btn-continuar" (click)="continuarProceso()" [disabled]="isLoading">Continuar Proceso</button>
    <button class="btn-terminar" (click)="terminarProceso()" [disabled]="isLoading">Terminar Proceso</button>
  </div>
</div>

<!-- Card de cierre -->
<div class="card" *ngIf="mostrarTerminarProceso">
  <h3>Justificación de Cierre</h3>
  <form [formGroup]="cierreForm" (ngSubmit)="enviarCierre()">
    <div class="form-group">
      <label>Motivo de finalización*</label>
      <textarea rows="3" formControlName="justificacion" placeholder="Explique por qué se cierra el proceso..."></textarea>
    </div>
    <button type="submit" class="btn-guardar" [disabled]="isLoading">Enviar Justificación</button>
  </form>
</div>
